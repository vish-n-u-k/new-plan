{
  "contractVersion": "v1.0.0",
  "status": "draft",
  "generatedFrom": ["M-AUTH", "M-PROFILE", "M-RESGEN", "M-EDITOR", "M-RESMGMT", "M-SETTINGS"],

  "apiConventions": {
    "basePath": "/api",
    "versioning": "none",
    "currentVersion": null,
    "contentType": "application/json"
  },

  "authStrategy": {
    "method": "cookie",
    "cookieName": "session_token",
    "sessionStore": "database",
    "tokenExpiry": "7d",
    "refreshStrategy": "sliding"
  },

  "middleware": [
    {
      "id": "mw-cors",
      "order": 1,
      "description": "CORS configuration",
      "config": {
        "origins": ["http://localhost:3000"],
        "credentials": true
      }
    },
    {
      "id": "mw-auth",
      "order": 2,
      "description": "Session/token validation. Validates the session_token cookie and attaches the authenticated user to the request context.",
      "appliesTo": "/**",
      "excludes": [
        "/api/auth/register",
        "/api/auth/login",
        "/api/auth/forgot-password",
        "/api/auth/reset-password"
      ]
    },
    {
      "id": "mw-rate-limit",
      "order": 3,
      "description": "Rate limiting",
      "config": {
        "windowMs": 60000,
        "max": 100
      }
    }
  ],

  "errorEnvelope": {
    "shape": {
      "success": "boolean",
      "error": {
        "code": "string — machine-readable error code",
        "message": "string — human-readable message",
        "details": "object|null — field-level errors for validation"
      }
    },
    "standardCodes": {
      "validation": "VALIDATION_ERROR",
      "notFound": "NOT_FOUND",
      "unauthorized": "UNAUTHORIZED",
      "forbidden": "FORBIDDEN",
      "conflict": "CONFLICT",
      "server": "INTERNAL_ERROR"
    }
  },

  "pagination": {
    "strategy": "offset",
    "defaultPageSize": 20,
    "maxPageSize": 100,
    "responseShape": {
      "items": "array",
      "total": "number",
      "page": "number",
      "pageSize": "number",
      "hasMore": "boolean"
    }
  },

  "statusCodeConventions": {
    "create": 201,
    "read": 200,
    "update": 200,
    "delete": 204,
    "validation_error": 422,
    "unauthorized": 401,
    "forbidden": 403,
    "not_found": 404,
    "conflict": 409,
    "server_error": 500
  },

  "publicEndpoints": [
    {
      "method": "POST",
      "path": "/api/auth/register",
      "operationId": "registerUser",
      "sourceModule": "M-AUTH"
    },
    {
      "method": "POST",
      "path": "/api/auth/login",
      "operationId": "loginUser",
      "sourceModule": "M-AUTH"
    },
    {
      "method": "POST",
      "path": "/api/auth/forgot-password",
      "operationId": "forgotPassword",
      "sourceModule": "M-AUTH"
    },
    {
      "method": "POST",
      "path": "/api/auth/reset-password",
      "operationId": "resetPassword",
      "sourceModule": "M-AUTH"
    }
  ],

  "sharedEndpoints": [
    {
      "method": "GET",
      "path": "/api/templates",
      "operationId": "listTemplates",
      "referencedBy": ["M-RESGEN", "M-EDITOR", "M-SETTINGS"],
      "description": "Returns available resume templates. Shared endpoint used by template selector, editor preview, and settings default template preference."
    }
  ],

  "fileUploadConventions": {
    "contentType": "multipart/form-data",
    "maxFileSize": "5MB",
    "acceptedFormats": ["application/pdf", "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "text/plain", "application/rtf", "text/rtf"],
    "usedBy": ["/api/profile/resume/upload"]
  }
}
